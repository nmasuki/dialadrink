{{#if userData.user}}
	<script type="text/javascript">
		window.addressData = {
			user: {{{json  userData.user}}},
			location: {{{json userData.location}}}
		}
	</script>
{{/if}}

<div id="cart-content-main" class="container-fluid">
	<div class="row">
		<div class="col-lg-8 col-md-12">
			<div class="card shadow-sm">
				<div class="card-header bg-primary text-white">
					<h4 class="card-title mb-0">
						<i class="fa fa-shopping-cart"></i> Your Cart
					</h4>
				</div>
				<div class="card-body p-0">
					<div class="list-group list-group-flush" id="cart-view">

						<div class="list-group-item" data-cartid="{{cartId}}">
							<div class="row align-items-center">
								<div class="col-md-2 text-center">
									<img src="https://ik.imagekit.io/wcyvhkbdjw4r/Dial_A_Drink/tonic_ebnFJx_7Q.jpg?ik-sdk-version=javascript-1.4.3&updatedAt=1656410684685" 
										 alt="Tonic Water" 
										 class="img-fluid rounded"
										 style="height: 70px; object-fit: cover;">
								</div>
								<div class="col-md-6">
									<h5 class="mb-1">
										<a class="cart-product-link text-decoration-none" href="/tonic-water">
											<strong>Add Tonic Water</strong>
										</a>
									</h5>
									<p class="text-muted small mb-0">Perfect mixer for your drinks</p>
								</div>
								<div class="col-md-2 text-center">
									<img class="cart-image" 
										 src="https://ik.imagekit.io/wcyvhkbdjw4r/Dial_A_Drink/bask.png?ik-sdk-version=javascript-1.4.3&updatedAt=1656414423995" 
										 style="width: 35px; height: 35px"
										 alt="Add to basket">
								</div>
								<div class="col-md-2 text-right">
									<button class="btn btn-sm btn-outline-primary">
										<i class="fa fa-plus"></i>
									</button>
								</div>
							</div>
						</div>

				{{!-- <li data-cartid="{{cartId}}" class="list-group-item d-flex justify-content-between lh-condensed row">
				
					<div class="col-md-5">
						<h4 class="my-0">
							<img src="https://ik.imagekit.io/wcyvhkbdjw4r/Dial_A_Drink/delivery__2__ncdnk5-JF.png?ik-sdk-version=javascript-1.4.3&updatedAt=1666967423015" alt="Youtube" style="height: 50px;">
								<b>Delivery Fee : KES.195</b>

						</h4>
						 
					</div>
					 
				</li> --}}



			{{#each cartItems}}
				<li data-cartid="{{cartId}}" class="list-group-item d-flex justify-content-between lh-condensed row">
					<div class="col-md-3">
						<img class="cart-image" src="{{cloudinaryUrl image crop='fit' height=52}}" style="width: 52px; height: 52px">
					</div>
					<div class="col-md-5">
						<h4 class="my-0">
							<a class="cart-product-link" href="/{{product.href}}">
								{{product.name}}&nbsp;{{quantity}}
							</a>
						</h4>
						<!--<small class="text-muted cart-description">{{truncate description 50}}</small>-->
						<small class="text-muted">
							<span class="cart-pieces">{{pieces}}</span> piece{{#ifgt pieces 1}}s{{/ifgt}}
							@<span class="cart-currency">KES</span> {{formatNumber price}}
						</small>
						<div class="right">
							<span class="cart-currency">KES</span>
							<stan class="cart-price">{{formatNumber (prod pieces price)}}</stan>
						</div>
					</div>
					<div class="col-md-4 product-qty">
						<div class="row">
							<a href='#' class='close cart-remove' data-dismiss='alert'>&times;</a>
						</div>

						<span id="pieces-plus" class="pieces-plus btn btn-default btn-lg btn-qty cart-pieces-add"
							  style="width: 42px; height: 40px;color: black !important;">
						  	<span class="glyphicon glyphicon-plus" aria-hidden="true" style="padding: 8px 0px;"></span>
						</span>
						<input id="pieces" value="{{pieces}}"
							   class="pieces cart-pieces btn btn-default btn-lg btn-qty cart-pieces"
							   style="width: 42px; height: 40px;color: black !important;"/>
						<span id="pieces-minus" class="pieces-minus btn btn-default btn-lg btn-qty cart-pieces-minus"
							  style="width: 42px; height: 40px;color: black !important;">							
							<span class="glyphicon glyphicon-minus" aria-hidden="true" style="padding: 8px 0px;"></span>
						</span>
					</div>
				</li>
			{{else}}
				<li class="list-group-item d-flex justify-content-between lh-condensed row">
					<div class="loading cart-loading">
						<img src="https://res.cloudinary.com/nmasuki/image/upload/c_fill/empty-cart.png" alt="Empty!" style="height: 50px;">
						You have no items in your cart!!
					</div>
					<a href="/">Continue shopping.</a>
				</li>
			{{/each}}
			<li class="transaction-charges list-group-item d-flex justify-content-between lh-condensed row" style="display: none;">
				<div class="text-info">
					<h4 class="my-0">Transaction Charges</h4>
				</div>
				<span class="text-info cart-currency">KES</span> 
				<span class="text-info cart-amount">100.00</span>
			</li>

			<li class="delivery-charges list-group-item d-flex justify-content-between lh-condensed row" style="display: none;">
				<div class="text-info">
					<h4 class="my-0">Delivery Charges</h4>
				</div>
				<span class="text-info cart-currency">KES</span> 
				<span class="text-info cart-amount">300.00</span>
			</li>

			<li style="display: none;"
				class="promo-code-wrapper list-group-item d-flex justify-content-between lh-condensed row">
				<div class="text-success">
					<h4 class="my-0">Promo code</h4>
					<small class="promo-code">{{promocode.code}}</small>
				</div>
				<span class="cart-currency">KES</span> (<span class="text-success promo-code-amount">{{promocode.amount}}</span>)
			</li>

		</ul>
	</div>
	{{#if cartItems.length}}
		<div class="col-md-5">
			<div class="summary">
				<div class="row">
					<div class="col-md-8">
						<div class="summary-item">
							<div style="float:left; width:150px">Products</div>
							<strong class="cart-total-products">{{sumEvals cartItems 'c=>1' }}</strong>
						</div>
						<div class="summary-item">
							<div style="float:left; width:150px">Total Pieces</div>
							<strong class="cart-total-pieces">{{sumEvals cartItems 'c=>c.pieces' }}</strong>
						</div>

						<div class="summary-item">
							<div style="float:left; width:150px">Delivery Charges</div>
							<strong>KES 195</strong>
						</div>
						<div class="summary-item">
							<div style="float:left; width:150px">Total (<span class="cart-currency">KES</span>)</div>
							<strong class="cart-total">{{formatNumber
									(sumEvals cartItems 'c=>c.pieces*c.price')}}</strong>
						</div>
					</div>
					<div class="summary-item col-md-4">
						<a href="/">Continue shopping</a>
						<button class="btn btn-primary" style="float: right; bottom:0;" onclick="window.location='/checkout'"
								id="update-cart" name="update">Checkout
						</button>
					</div>
				</div>
			</div>
		</div>
	{{/if}}	
</div>


