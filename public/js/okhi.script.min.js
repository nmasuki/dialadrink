$(document).ready(function(){window.addressData=window.addressData||null,$(document).on("load","#lets-okhi-card iframe",function(){console.log(arguments)}),$(document).on("error","#lets-okhi-card iframe",function(){console.error(arguments)}),window.loadLocationCard=function(e){var a;$("#lets-okhi").hide();if((e=e||{phone:$("#phoneNumber").val()||"",firstName:$("#firstName").val(),lastName:$("#lastName").val()}).phone="+"+e.phone.cleanPhoneNumber(),e.firstName||delete e.firstName,e.lastName||delete e.lastName,e.phone&&10<=e.phone.length)if(a=setTimeout(function(){window.addressData||$("#lets-okhi-card").html()||($("#lets-okhi").hide(),$("#lets-okhi-card").parent().hide(),$("#addressInputs").slideDown(),$(".alert-danger").find(".msg-text").html("<strong>Input Error while detecting your location! Please enter your address</strong>"),$(".alert-danger").slideDown())},5e3),window.addressData=null,window.locationCard)window.locationCard.user=new window.okhi.OkHiUser(e);else{var o=document.getElementById("lets-okhi-card");window.locationCard=new window.okhi.OkHiLocationCard({user:new window.okhi.OkHiUser(e),style:okhiStyle},o,function(e,o){if(e)return function(e){if(clearTimeout(a),window.addressData=null,"invalid_phone"==e.code)return $(".alert-danger").find(".msg-text").html("<strong>"+e.message+"</strong>"),void $(".alert-danger").slideDown();console.warn("Error Implimentation not done!",e),$("#lets-okhi").animate({width:"toggle"},350),$("#lets-okhi-card").hide()}(e);!function(e){clearTimeout(a),window.addressData=e,window.addressData&&(app.cartUtil.loadCharges(window.addressData.location),app.cartUtil.updateView()),e&&e.user&&e.location?($("#lets-okhi").hide(),e.user.firstName&&$("#firstName").val(e.user.firstName),e.user.lastName&&$("#lastName").val(e.user.lastName),$("[name=address]").val(e.location.title),$("[name=building]").val(e.location.streetName),$("[name=houseNumber]").val([e.location.propertyName,e.location.directions].join(", ").trim().trim(","))):($("#lets-okhi").show(),$("#lets-okhi-card").hide())}(o)})}},window.loadLocationLookUp=function(e){var a;((e=e||{phone:$("#phoneNumber").val()||"",firstName:$("#firstName").val(),lastName:$("#lastName").val()}).phone="+"+e.phone.cleanPhoneNumber(),e.phone&&e.firstName&&e.lastName)?(a=setTimeout(function(){$("##lets-okhi-card").html()||loadLocationCard(e)},5e3),new okhi.OkHiLocationManager({user:new window.okhi.OkHiUser(e),config:okhiConfig,style:okhiStyle,mode:okhi.OkHiLocationManagerLaunchMode.select_location}).launch(function(e,o){if(e)return function(e){clearTimeout(a),window.addressData=null,$("#lets-okhi").animate({width:"toggle"},350),$("#addressInputs").slideDown(),$(".alert-danger").find(".msg-text").html("<strong>Input Error while detecting your location!</strong> "+e),$(".alert-danger").slideDown()}(e);!function(e){clearTimeout(a),window.addressData=e,$("#lets-okhi").animate({width:"toggle"},350),$("#submitBtn").show(),$("[name=address]").val(e.location.title),$("[name=building]").val(e.location.streetName),$("[name=houseNumber]").val([e.location.propertyName,e.location.directions].join(", ").trim().trim(",")),$("#lets-okhi").parent().show(),loadLocationCard()}(o)})):($(".alert-danger").find(".msg-text").html("<strong>Input Error!</strong> Invalid input found! Please fill in your <b>names</b> and <b>phone number</b>."),$(".alert-danger").slideDown())},$(document).on("change","#phoneNumber",function(e){loadLocationCard({firstName:$("#firstName").val(),lastName:$("#lastName").val(),phone:$("#phoneNumber").val()})}),$(document).on("click","#lets-okhi",function(e){e.preventDefault();$(this).parents("form");$(".alert-danger").hide(),loadLocationLookUp()})});