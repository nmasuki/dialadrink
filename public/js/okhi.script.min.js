$(document).ready(function(){window.addressData=window.addressData||null,$(document).on("load","#lets-okhi iframe",function(){console.log(arguments)}),$(document).on("error","#lets-okhi iframe",function(){console.error(arguments)}),window.loadLocationCard=function(t){var o;$(".alert-danger").hide();(t=t||window.addressData?.user||{phone:$("#phoneNumber").val()||"",firstName:$("#firstName").val(),lastName:$("#lastName").val()}).phone&&(t.phone="+"+t.phone.cleanPhoneNumber()),window.okhiCollection?window.okhiCollection.$set({userPhoneNumber:t.phone,userFirstName:t.firstName,userLastName:t.lastName}):(window.okhiCollection=new okcollect({target:document.querySelector("#lets-okhi"),props:{API_KEY:window.okhiData.clientKey,userFirstName:t.firstName||"",userLastName:t.lastName||"",userPhoneNumber:t.phone||"",onAddressSelected:e=>{e=e,$(".alert-danger").hide(),clearTimeout(o),(t={phone:$("#phoneNumber").val()||"",firstName:$("#firstName").val(),lastName:$("#lastName").val()}).phone&&(t.phone="+"+t.phone.cleanPhoneNumber()),e={id:e.id,user:t,userId:e.user_id,plus_code:e.plus_code,location:Object.assign(e.geo_point,{id:e.id,url:e.url,title:e.display_title,subtitle:e.subtitle,streetName:e.street_name,propertyName:e.property_name,directions:e.directions,otherInformation:e.other_information})},window.addressData=e,window.addressData&&(app.cartUtil.loadCharges(window.addressData.location),app.cartUtil.updateView()),e&&e.user&&e.location&&(e.user.firstName&&$("#firstName").val(e.user.firstName),e.user.lastName&&$("#lastName").val(e.user.lastName),$("[name=address]").val(e.location.title),$("[name=building]").val(e.location.streetName),e=[e.location.propertyName,e.location.directions,e.location.otherInformation].filter(function(e){return!!e}),$("[name=houseNumber]").val(e.join(", ")))},onError:e=>{e=e,clearTimeout(o),window.addressData=null,"invalid_phone"!=e.code?e.code&&($(".alert-danger").find(".msg-text").html("<strong>"+e.message+" while getting user location!</strong>"),$(".alert-danger").slideDown()):t.phone&&($(".alert-danger").find(".msg-text").html("<strong>"+e.message+"</strong>"),$(".alert-danger").slideDown())},streetviewEnabled:!0,toTheDoorEnabled:!0,styleSettings:window.okhiData.style,appSettings:{name:window.okhiData.appName,version:window.okhiData.appVersion}}}),document.querySelector("#phoneNumber").addEventListener("input",e=>{e.target.value&&window.okhiCollection.$set({userPhoneNumber:"+"+e.target.value.cleanPhoneNumber()})}),document.querySelector("#firstName").addEventListener("input",e=>{window.okhiCollection.$set({userFirstName:e.target.value})}),document.querySelector("#lastName").addEventListener("input",e=>{window.okhiCollection.$set({userLastName:e.target.value})}),$("#lets-okhi").parent().show(),t.phone&&10<=t.phone.length&&(o=setTimeout(function(){window.addressData||$("#lets-okhi").html()||($("#lets-okhi").parent().hide(),$("#addressInputs").slideDown(),$(".alert-danger").find(".msg-text").html("<strong>Input Error while detecting your location! Please enter your address</strong>"),$(".alert-danger").slideDown())},5e3)))},window.loadLocationLookUp=function(e){window.loadLocationCard(e)},$(document).on("click","#lets-okhi button",function(e){window.addressData||(e.preventDefault(),$(this).parents("form"),$(".alert-danger").hide(),loadLocationLookUp())})});