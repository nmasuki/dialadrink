$(document).ready(function(){window.addressData=window.addressData||null,$(document).on("load","#lets-okhi-card iframe",function(){console.log(arguments)}),$(document).on("error","#lets-okhi-card iframe",function(){console.error(arguments)});function a(e){var t;if($("#lets-okhi").hide(),(e=e||{firstName:$("#firstName").val(),lastName:$("#lastName").val(),phone:$("#phoneNumber").val()}).firstName||delete e.firstName,e.lastName||delete e.lastName,e.phone&&10<=e.phone.length)if(t=setTimeout(function(){window.addressData||($("#lets-okhi").hide(),$("#lets-okhi-card").parent().hide(),$("#addressInputs").slideDown(),$(".alert-danger").find(".msg-text").html("<strong>Input Error while detecting your location! Please enter your address</strong>"),$(".alert-danger").slideDown())},5e3),window.addressData=null,window.locationCard)window.locationCard.user=e;else{var a=document.getElementById("lets-okhi-card");window.locationCard=new okhi.LocationCard({element:a,user:e,onSuccess:function(e){clearTimeout(t),window.addressData=e,window.addressData&&(app.cartUtil.loadCharges(window.addressData.location),app.cartUtil.updateView()),e&&e.user&&e.location?($("#lets-okhi").hide(),e.user.firstName&&$("#firstName").val(e.user.firstName),e.user.lastName&&$("#lastName").val(e.user.lastName),$("[name=address]").val(e.location.title),$("[name=building]").val(e.location.streetName),$("[name=houseNumber]").val([e.location.propertyName,e.location.directions].join(", ").trim().trim(","))):($("#lets-okhi").show(),$("#lets-okhi-card").hide())},onError:function(e){clearTimeout(t),window.addressData=null,console.warn("Error Implimentation not done!",arguments),$("#lets-okhi").animate({width:"toggle"},350),$("#lets-okhi-card").hide()},style:okhiStyle})}}$("#phoneNumber").val()&&a(),$(document).on("change","#phoneNumber",function(e){a({firstName:$("#firstName").val(),lastName:$("#lastName").val(),phone:$("#phoneNumber").val()})}),$(document).on("click","#lets-okhi",function(e){e.preventDefault();$(this).parents("form");$(".alert-danger").hide(),function(e){var t;(e=e||{phone:$("#phoneNumber").val(),firstName:$("#firstName").val(),lastName:$("#lastName").val()}).phone&&e.firstName&&e.lastName?(t=setTimeout(function(){window.addressData=null,$("#lets-okhi").parent().hide(),$("#addressInputs").slideDown(),$(".alert-danger").find(".msg-text").html("<strong>Input Error while detecting your location! Please enter your address</strong>"),$(".alert-danger").slideDown()},5e3),new okhi.LocationManager({user:e,onSuccess:function(e){clearTimeout(t),window.addressData=e,$("#lets-okhi").animate({width:"toggle"},350),$("#submitBtn").show(),$("[name=address]").val(e.location.title),$("[name=building]").val(e.location.streetName),$("[name=houseNumber]").val([e.location.propertyName,e.location.directions].join(", ").trim().trim(",")),$("#lets-okhi").parent().show(),a()},onError:function(e){clearTimeout(t),window.addressData=null,$("#lets-okhi").animate({width:"toggle"},350),$("#addressInputs").slideDown(),$(".alert-danger").find(".msg-text").html("<strong>Input Error while detecting your location!</strong> "+e),$(".alert-danger").slideDown()},style:okhiStyle}).launch({mode:"select_location"})):($(".alert-danger").find(".msg-text").html("<strong>Input Error!</strong> Invalid input found! Please fill in your <b>names</b> and <b>phone number</b>."),$(".alert-danger").slideDown())}()})});