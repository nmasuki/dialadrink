$(document).ready(function(){window.addressData=window.addressData||null;function t(e){if($("#lets-okhi").hide(),(e=e||{firstName:$("#firstName").val(),lastName:$("#lastName").val(),phone:$("#phoneNumber").val()}).firstName||delete e.firstName,e.lastName||delete e.lastName,e.phone&&10<=e.phone.length)if(window.addressData=null,window.locationCard)window.locationCard.user=e;else{var a=document.getElementById("lets-okhi-card");window.locationCard=new okhi.LocationCard({element:a,user:e,onSuccess:function(e){window.addressData=e,window.addressData&&(app.cartUtil.loadCharges(window.addressData.location),app.cartUtil.updateView()),e&&e.user&&e.location?($("#lets-okhi").hide(),e.user.firstName&&$("#firstName").val(e.user.firstName),e.user.lastName&&$("#lastName").val(e.user.lastName),$("[name=address]").val(e.location.title),$("[name=building]").val(e.location.streetName),$("[name=houseNumber]").val([e.location.propertyName,e.location.directions].join(", ").trim().trim(","))):($("#lets-okhi").show(),$("#lets-okhi-card").hide())},onError:function(e){window.addressData=null,console.warn("Error Implimentation not done!",arguments),$("#lets-okhi").show(),$("#lets-okhi-card").hide()},style:okhiStyle})}}$("#phoneNumber").val()&&t(),$(document).on("change","#phoneNumber",function(e){t({firstName:$("#firstName").val(),lastName:$("#lastName").val(),phone:$("#phoneNumber").val()})}),$(document).on("click","#lets-okhi",function(e){e.preventDefault();var a=$(this).parents("form");$(".alert-danger").hide(),a[0].checkValidity()?function(e){(e=e||{phone:$("#phoneNumber").val(),firstName:$("#firstName").val(),lastName:$("#lastName").val()}).phone&&e.firstName&&e.lastName?new okhi.LocationManager({user:e,onSuccess:function(e){window.addressData=e,$("#lets-okhi").animate({width:"toggle"},350),$("#submitBtn").show(),$("[name=address]").val(e.location.title),$("[name=building]").val(e.location.streetName),$("[name=houseNumber]").val([e.location.propertyName,e.location.directions].join(", ").trim().trim(",")),$("#addressInputs").slideDown(),t()},onError:function(e){window.addressData=data,$("#lets-okhi").animate({width:"toggle"},350),$("#addressInputs").slideDown(),$(".alert-danger").find(".msg-text").html("<strong>Input Error while detecting your location!</strong> "+e),$(".alert-danger").slideDown()},style:okhiStyle}).launch({mode:"select_location"}):($(".alert-danger").find(".msg-text").html("<strong>Input Error!</strong> Invalid input found! Please review your info above."),$(".alert-danger").slideDown())}():($(".alert-danger").find(".msg-text").html("<strong>Input Error!</strong> Invalid input found! Please review your info above."),$(".alert-danger").slideDown())})});